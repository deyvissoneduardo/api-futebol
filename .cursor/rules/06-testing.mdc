# Testes

## Estrutura

```
src/test/java/br/com/futebol/
├── unit/           → Testes unitários
│   ├── auth/
│   ├── events/
│   └── user/
└── integration/    → Testes de integração
    ├── auth/
    ├── events/
    └── user/
```

## Testes Unitários

```java
@QuarkusTest
@DisplayName("Testes do XxxService")
class XxxServiceTest {

    @Inject
    XxxService service;

    @InjectMock
    XxxRepository repository;

    @BeforeEach
    void setUp() {
        Id = UUID.randomUUID();
        when(context.getTenantId()).thenReturn(id);
    }

    @Test
    @DisplayName("Deve fazer algo com sucesso")
    void shouldDoSomethingSuccessfully() {
        // Arrange
        when(repository.findById(any())).thenReturn(Optional.of(entity));

        // Act
        var result = service.doSomething();

        // Assert
        assertNotNull(result);
        assertEquals(expected, result);
    }
}
```

## Testes de Integração

```java
@QuarkusIntegrationTest
class XxxIntegrationTest extends BaseIntegrationTest {

    @Test
    void shouldCreateXxx() {
        given()
            .header("Host", TEST_DOMAIN)
            .header("Authorization", "Bearer " + adminToken)
            .contentType(ContentType.JSON)
            .body(request)
        .when()
            .post("/api/xxx")
        .then()
            .statusCode(201);
    }
}
```

## Convenções

- Nomes: `should[Ação][Condição]` (ex: `shouldLoginSuccessfully`)
- Usar `@DisplayName` em português
- AAA: Arrange, Act, Assert
- Mock apenas dependências externas

## Executando Testes

```bash
# Todos os testes
./mvnw clean test

# Apenas unitários
./mvnw test -Dtest="**/unit/**"

# Apenas integração
./mvnw test -Dtest="**/integration/**"
```
