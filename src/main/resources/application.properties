# =============================================================================
# Aplicacao
# =============================================================================
quarkus.application.name=api-futebol
quarkus.http.port=8080

# =============================================================================
# Datasource - PostgreSQL (LOCAL / DEV)
# Em producao (Heroku), JDBC_DATABASE_URL sobrescreve automaticamente
# =============================================================================
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=${JDBC_DATABASE_URL:jdbc:postgresql://localhost:5432/futebol_hml}
quarkus.datasource.username=${DB_USERNAME:futebol}
quarkus.datasource.password=${DB_PASSWORD:futebol123}
quarkus.datasource.active=true

# Pool
quarkus.datasource.jdbc.min-size=2
quarkus.datasource.jdbc.max-size=10

# =============================================================================
# Hibernate ORM
# =============================================================================
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.log.bind-parameters=true

# =============================================================================
# Flyway - Migrations
# =============================================================================
quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=db/migration

# =============================================================================
# JWT - Autenticacao
# =============================================================================
mp.jwt.verify.publickey.location=META-INF/resources/publicKey.pem
mp.jwt.verify.issuer=https://futebol.com

smallrye.jwt.sign.key.location=META-INF/resources/privateKey.pem
smallrye.jwt.new-token.lifespan=86400

# =============================================================================
# CORS - Cross-Origin Resource Sharing
# =============================================================================
# Origens permitidas (separadas por vírgula). Use * para permitir todas as origens.
# Para desenvolvimento local, inclua http://localhost:3000
# Use apenas * para permitir todas as origens, ou liste origens específicas separadas por vírgula
cors.allowed-origins=*
# Métodos HTTP permitidos
cors.allowed-methods=GET,POST,PUT,PATCH,OPTIONS,DELETE
# Headers permitidos
cors.allowed-headers=*
# Headers expostos ao cliente
cors.exposed-headers=*
# Permitir credenciais (cookies, authorization headers)
cors.allow-credentials=false
# Tempo de cache do preflight (em segundos)
cors.max-age=3600

# =============================================================================
# OpenAPI / Swagger
# =============================================================================
quarkus.smallrye-openapi.path=/q/openapi
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/q/swagger-ui

quarkus.smallrye-openapi.info-title=API Futebol
quarkus.smallrye-openapi.info-version=1.0.0
quarkus.smallrye-openapi.info-description=API para gerenciamento de futebol
quarkus.smallrye-openapi.info-contact-name=Time de Desenvolvimento
quarkus.smallrye-openapi.info-contact-email=dev@futebol.com

# Public endpoints
quarkus.http.auth.permission.public.paths=/q/health/*,/q/openapi,/q/swagger-ui/*,/users,/api/auth/login
quarkus.http.auth.permission.public.policy=permit

# Registro de (POST /api/users)
quarkus.http.auth.permission.register.paths=/api/users
quarkus.http.auth.permission.register.methods=POST
quarkus.http.auth.permission.register.policy=permit

# OPTIONS (CORS preflight) - OBRIGATORIO
quarkus.http.auth.permission.options.paths=/*,/api/*
quarkus.http.auth.permission.options.methods=OPTIONS
quarkus.http.auth.permission.options.policy=permit


